# JSBACH YAML DEFAULT CONFIGURATION FILE

model: jsbach
repository: https://gitlab.dkrz.de/modular_esm/echam6
domain: vegetation

description: |
        The JSBACH vegetation model, major version 3
        (someone from Hamburg)
        paper citation

license_text: |
        Please make sure you have a licence to use echam.In case you are
        unsure, please contact redmine....


pool_dir: "${computer.pool_directories.pool}/JSBACH"
input_dir: "${pool_dir}/ECHAM6/input/${dataset}"
adj_input_dir: "${input_dir}/${resolution}"

dynamic_vegetations: True

choose_dynamic_vegetations: 
        true:
                dynveg: "_dynveg"
        false:
                dynveg: "_no_dynveg"

version: 3.20
dataset: r0009

forcing_sources:
        lctlib: "${model_dir}/lctlib_nlct21.def"

choose_version:
        3.20:
                dataset: r0010               
                forcings:
                        a_nd_file: a_nd_file
                        lightning: lightning
                        popdens: popdens
                choose_dynamic_vegetations: 
                        true:
                                namelist_dir: "${general.esm_master_dir}/esm-runscripts/namelists/jsbach/${scenario}/dynveg"
                        false:
                                namelist_dir: "${general.esm_master_dir}/esm-runscripts/namelists/jsbach/${scenario}/no_dynveg"
        3.10:
                dataset: r0007
                namelist_dir: "${general.esm_master_dir}/esm-runscripts/namelists/jsbach/${scenario}/${resolution}"

forcings:
        LU_trans: LU_trans

choose_scenario:
        PI-CTRL:
                forcings:
                        jsbach: jsbach_1850
                        LU: LU_1850
                        choose_version:
                                3.20:
                                        Ndepo: Ndepo_1850
        1850:
                forcings:
                        jsbach: jsbach_1850
                        LU: LU_1850
                        choose_version:
                                3.20:
                                        Ndepo: Ndepo_1850
        PALEO:
                forcings:
                        jsbach: jsbach_1850
                        LU: LU_1850
                        choose_version:
                                3.20:
                                        Ndepo: Ndepo_1850
        4CO2:
                forcings:
                        jsbach: jsbach_1850
                        LU: LU_1850
                        choose_version:
                                3.20:
                                        Ndepo: Ndepo_1850
        1percCO2:
                forcings:
                        jsbach: jsbach_1850
                        LU: LU_1850
                        choose_version:
                                3.20:
                                        Ndepo: Ndepo_1850
        RCP26:
                forcings:
                        jsbach: jsbach_1850
                        LU: LU_RCP26
                        cover_fract: cover_fract_HIST
        RCP45:
                forcings:
                        jsbach: jsbach_1850
                        LU: LU_RCP45
                        cover_fract: cover_fract_HIST
        RCP85:
                forcings:
                        jsbach: jsbach_1850
                        LU: LU_RCP85
                        cover_fract: cover_fract_HIST
        HIST:
                forcings:
                        jsbach: jsbach_1850
                        LU: LU_HIST
                        cover_fract: cover_fract_HIST
        1950:                
                forcings:
                        jsbach: jsbach_1976
                        LU: LU_1950

forcing_in_workdir:
        "jsbach": "jsbach.nc"
        "lctlib": "lctlib_nclt21.def"
        "cover_fract": "cover_fract.@YEAR@.nc"
        "a_nd_file": "a_nd_file.nc"
        "lightning": "lightning.nc"
        "popdens": "population_density.nc"
        "LU" : "landuse_harvest.@YEAR@.nc"
        "Ndepo": "Ndepo.@YEAR@.nc"
        "LU_trans": "landuseTransitions.@YEAR@.nc"

forcing_modifications:
        Ndepo:  "<--setyear-- @YEAR@"                

streams:
        - jsbach
        - jsbid
        - yasso
        - surf
        - nitro
        - veg
        - land


          #ym_dates:
          #        - "[[write_output_dates-->WHEN]]<--year--WHEN<--month--.WHEN<--day--"  # not so sure

          #restart_in_files:
          #"[[streams-->STREAM]]": "STREAM"

restart_sources:
        "[[streams-->STREAM]]":
                - "restart_${general.expid}_STREAM_${prev_date}.nc"
                - "restart_${general.expid}_${prev_date}_STREAM.nc"

restart_in_workdir:        
        "[[streams-->STREAM]]": "restart_${general.expid}_STREAM.nc"

        #restart_out_files:
        #"[[streams-->STREAM]]_[[write_restart_dates-->WHEN]]": "STREAM_WHEN"

        #restart_targets:
        #        "[[streams-->STREAM]]_[[write_restart_dates-->WHEN]]_out": "restart_${general.expid}_STREAM_WHEN.nc"
        #
        #restart_in_workdir:
        #        "[[streams-->STREAM]]_[[write_restart_dates-->WHEN]]_out": "restart_${general.expid}_STREAM_WHEN.nc"
        #
        #output_targets:
        #        "[[streams-->STREAM]]_[[ym_dates-->WHEN]]_grb": ${general.expid}_echam6_STREAM_WHEN.grb
        #        "[[streams-->STREAM]]_[[ym_dates-->WHEN]]_codes": ${general.expid}_echam6_STREAM.codes
        #        "[[streams-->STREAM]]_[[ym_dates-->WHEN]]_nc": ${general.expid}_echam6_STREAM_WHEN.nc
        #
        #output_in_workdir:
        #        "[[streams-->STREAM]]_[[ym_dates-->WHEN]]_grb": ${general.expid}_WHEN_STREAM
        #        "[[streams-->STREAM]]_[[ym_dates-->WHEN]]_codes": ${general.expid}_WHEN_STREAM.codes
        #        "[[streams-->STREAM]]_[[ym_dates-->WHEN]]_nc": ${general.expid}_WHEN_STREAM.nc
        #
        #output_files:
        #"[[streams-->STREAM]]_[[ym_dates-->WHEN]]_grb": STREAM_WHEN_grd
        #"[[streams-->STREAM]]_[[ym_dates-->WHEN]]_codes": STREAM_WHEN_codes
        #"[[streams-->STREAM]]_[[ym_dates-->WHEN]]_nc": STREAM_WHEN_nc

further_reading:
        - jsbach.inherit.yaml
        - jsbach.datasets.yaml
